<div class="container">
  <h2 class="text-3xl font-bold text-gray-800 text-center my-4">
    Your shopping cart
  </h2>
  <table class="w-full mt-6" *ngIf="cart.items.length > 0">
    <tr class="bg-gray-800 p-4 text-gray-100 divide-x border-gray-400">
      <th></th>
      <th>Name</th>
      <th>Units</th>
      <th>Price</th>
      <th class="w-20 whitespace-nowrap">Subtotal</th>
    </tr>

    <tr *ngFor="let product of cart.items" class="item">
      <td (click)="cart.deleteFromCart(product.id)" class="cursor-pointer">
        <i class="fas fa-trash-alt text-red-500"></i>
      </td>
      <td>{{ product.title }}</td>
      <td>
        {{ product.units }}
        <input
          type="number"
          min="1"
          max="{{ product.unitsInStock }}"
          class="border border-gray-200 float-right mr-1"
          value="{{ product.units }}"
          (change)="cart.changeUnitOfProduct(product, $event.target.value)"
        />
      </td>
      <td>{{ product.price | currency: "USD" }}</td>
      <td class="w-20 overflow-auto whitespace-nowrap">
        {{ product.price * product.units | currency: "USD" }}
      </td>
    </tr>

    <tr>
      <td></td>
      <td></td>
    </tr>
  </table>

  <div
    *ngIf="cart.items.length > 0"
    class="flex justify-end w-full items-center"
  >
    <div
      class="border border-red-500 text-red-500 hover:bg-red-500 hover:text-white px-3 text-center py-1 cursor-pointer"
      (click)="cart.clearCart()"
    >
      <i class="fas fa-minus-circle mr-3"></i>
      Clear
    </div>
    <a [routerLink]="['/checkout']">
      <div
        class="border-2 py-1 px-3 border-green-400 text-green-400 hover:text-white hover:bg-green-400 text-center cursor-pointer"
      >
        Checkout
        <i class="fas fa-arrow-right ml-3"></i>
      </div>
    </a>

    <div class="border px-3 border-red-200 py-1">
      Total: {{ cart.cartTotal | currency: "USD" }}
    </div>
  </div>
  <!-- If there are no items in the cart â†“-->
  <div class="mx-auto" *ngIf="cart.items.length <= 0">
    <h2 class="text-2xl my-2">No items in the Cart</h2>
    <a
      class="text-red-500 px-4 py-1 border-2 font-bold border-red-500"
      [routerLink]="['/']"
      >Go back home</a
    >
  </div>
</div>
